@use "../../styles/settings" as *;

.cookie-consent {
  @keyframes cookie-panel-enter {
    from {
      opacity: 0;
      transform: translateY(14px) scale(0.985);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes cookie-panel-exit {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(12px) scale(0.985);
    }
  }

  @keyframes cookie-settings-enter {
    from {
      opacity: 0;
      transform: translateY(8px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes cookie-settings-exit {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(8px) scale(0.95);
    }
  }

  @keyframes cookie-manager-close {
    from {
      max-height: 420px;
      opacity: 1;
      transform: translateY(0);
    }
    to {
      max-height: 0;
      opacity: 0;
      transform: translateY(-6px);
    }
  }

  @keyframes cookie-manager-open {
    from {
      max-height: 0;
      opacity: 0;
      transform: translateY(-6px);
    }
    to {
      max-height: 420px;
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes cookie-option-in {
    from {
      opacity: 0;
      transform: translateX(-8px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes cookie-option-out {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(-8px);
    }
  }

  bottom: 16px;
  left: 16px;
  position: fixed;
  right: 16px;
  z-index: $top-z-index;

  &.is-enter {
    animation: cookie-panel-enter 250ms ease-out both;
  }

  &.is-exit {
    animation: cookie-panel-exit 230ms ease-in both;
    pointer-events: none;
  }

  &__card {
    background:
      radial-gradient(
        340px 180px at 92% -36%,
        rgba($logo-color-3, 0.16),
        transparent
      ),
      radial-gradient(
        240px 130px at -8% 110%,
        rgba($logo-color-2, 0.12),
        transparent
      ),
      linear-gradient(145deg, rgba(#11131d, 0.98), rgba(#171922, 0.98));
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 12px;
    box-shadow: 0 20px 52px rgba(0, 0, 0, 0.42);
    display: grid;
    gap: 14px;
    max-height: calc(100dvh - 32px);
    overflow-y: auto;
    padding: 16px;
    backdrop-filter: blur(10px);
    position: relative;
    @include scrollbar;
  }

  &__title {
    align-items: center;
    color: $white-color;
    display: flex;
    font-family: $font-righteous;
    font-size: 20px;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: 0.2px;
    gap: 10px;
  }

  &__content {
    display: grid;
    gap: 0;
  }

  &__icon {
    align-items: center;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 10px;
    display: inline-flex;
    height: 38px;
    justify-content: center;
    margin: 0 0 8px;
    width: 38px;
  }

  &__description {
    color: rgba(255, 255, 255, 0.8);
    font-size: 13px;
    line-height: 1.45;
    margin-top: 6px;
    max-width: 600px;
  }

  &__links {
    align-items: center;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: rgba(255, 255, 255, 0.72);
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
    font-size: 12px;
    transition: all 1220ms ease-in-out;

    &.is-open {
      border-bottom: 1px solid;
      padding-bottom: 12px;
    }

    &.is-closed {
      border-bottom: 0;
      padding-bottom: 0;
    }
  }

  &__link {
    color: $logo-color-2;
    transition: color 160ms ease;

    &:hover {
      color: $logo-color-3;
    }
  }

  &__manager {
    overflow: hidden;

    &.is-open {
      animation: cookie-manager-open 620ms $animation-accordion both;
      pointer-events: auto;
      visibility: visible;
    }

    &.is-closed {
      animation: cookie-manager-close 420ms $animation-accordion 200ms both;
      pointer-events: none;
      visibility: visible;
    }

    &.is-initial {
      animation: none;
      max-height: 0;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-6px);
      visibility: hidden;
    }
  }

  &__manager-title {
    color: $white-color;
    font-size: 14px;
    font-weight: 700;
    line-height: 1.2;
  }

  &__manager-description {
    color: rgba(255, 255, 255, 0.72);
    font-size: 12px;
    line-height: 1.45;
    margin-top: 5px;
  }

  &__options {
    display: grid;
    gap: 8px;
    margin-top: 10px;
  }

  &__option {
    align-items: center;
    background: rgba(255, 255, 255, 0.025);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: $border-radius-standard;
    display: flex;
    gap: 10px;
    justify-content: space-between;
    padding: 9px 10px;
    opacity: 0;
    transform: translateX(-8px);
  }

  &__manager.is-open &__option {
    animation: cookie-option-in 220ms ease-out both;

    &:nth-child(1) {
      animation-delay: 350ms;
    }
    &:nth-child(2) {
      animation-delay: 390ms;
    }
    &:nth-child(3) {
      animation-delay: 430ms;
    }
    &:nth-child(4) {
      animation-delay: 470ms;
    }
  }

  &__manager.is-closed &__option {
    animation: cookie-option-out 180ms ease-in both;

    &:nth-child(1) {
      animation-delay: 0ms;
    }
    &:nth-child(2) {
      animation-delay: 0ms;
    }
    &:nth-child(3) {
      animation-delay: 0ms;
    }
    &:nth-child(4) {
      animation-delay: 0ms;
    }
  }

  &__option-meta {
    display: grid;
    gap: 3px;
    padding-right: 10px;

    strong {
      color: $white-color;
      font-size: 12px;
      font-weight: 700;
      line-height: 1.2;
    }

    span {
      color: rgba(255, 255, 255, 0.66);
      font-size: 11px;
      line-height: 1.35;
    }
  }

  &__toggle {
    background: rgba(255, 255, 255, 0.14);
    border: 1px solid rgba(255, 255, 255, 0.22);
    border-radius: 999px;
    flex-shrink: 0;
    height: 24px;
    padding: 2px;
    position: relative;
    transition: all 180ms ease;
    width: 44px;

    &.is-on {
      background: rgba($logo-color-3, 0.35);
      border-color: rgba($logo-color-2, 0.72);
    }

    &:disabled {
      cursor: not-allowed;
      opacity: 0.72;
    }

    &:not(:disabled):hover {
      transform: translateY(-1px);
    }

    &:not(:disabled):active {
      transform: translateY(0) scale(0.98);
    }
  }

  &__toggle-thumb {
    background: $white-color;
    border-radius: 50%;
    display: block;
    height: 18px;
    transform: translateX(0);
    transition: transform 180ms ease;
    width: 18px;
  }

  &__toggle.is-on &__toggle-thumb {
    transform: translateX(19px);
  }

  &__actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: flex-end;
  }

  &__button {
    border-radius: $border-radius-standard;
    font-size: 12px;
    font-weight: 600;
    min-height: 36px;
    padding: 0 12px;
    transition: all 160ms ease;

    &--ghost {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.18);
      color: rgba(255, 255, 255, 0.82);
    }

    &--outline {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.24);
      color: $white-color;
    }

    &:hover {
      border-color: rgba(255, 255, 255, 0.34);
      transform: translateY(-1px);
    }

    &:active {
      transform: translateY(0) scale(0.985);
    }
  }

  &__button--solid {
    @include button;

    & {
      min-height: auto;
      padding: 1px;
    }

    &::after {
      border-radius: $border-radius-standard;
      transform: translate(-50%, -50%) scale(1.005);
      transition: all 380ms $animation-bubble;
    }

    &:hover::after {
      transform: translate(-50%, -50%) scale(1.04);
      box-shadow: 0 0 20px 1px rgba($logo-color-3, 0.55);
    }

    span {
      align-items: center;
      border-radius: $border-radius-standard;
      display: inline-flex;
      font-size: 12px;
      font-weight: 700;
      justify-content: center;
      letter-spacing: 0.2px;
      min-height: 34px;
      padding: 0 12px;
    }
  }

  &__close {
    color: rgba(255, 255, 255, 0.72);
    font-size: 11px;
    line-height: 1;
    padding: 0;
    position: absolute;
    right: 10px;
    top: 10px;
    text-transform: uppercase;
    transition: color 160ms ease;

    &:hover {
      color: $white-color;
      transform: translateY(-1px);
    }
  }

  &--settings {
    bottom: 16px;
    left: auto;
    right: 16px;
    width: auto;

    &.is-enter {
      animation: cookie-settings-enter 200ms ease-out both;
    }

    &.is-exit {
      animation: cookie-settings-exit 180ms ease-in both;
      pointer-events: none;
    }
  }

  &__settings-button {
    background: linear-gradient(
      145deg,
      rgba(#11131d, 0.98),
      rgba(#171922, 0.98)
    );
    border: 1px solid rgba(255, 255, 255, 0.24);
    border-radius: 8px;
    color: rgba(255, 255, 255, 0.88);
    font-size: 12px;
    font-weight: 600;
    min-height: 36px;
    padding: 4px;
    transition: all 160ms ease;

    &:hover {
      border-color: rgba($logo-color-2, 0.54);
      color: $white-color;
      transform: translateY(-1px);
    }

    &:active {
      transform: translateY(0) scale(0.985);
    }
  }

  @media screen and (min-width: $media-sm) {
    left: 24px;
    max-width: 720px;
    right: auto;

    &__card {
      padding: 18px 18px 16px;
    }

    &--settings {
      left: auto;
      right: 24px;
    }
  }

  @media screen and (max-width: #{$media-sm - 1px}) {
    &__actions {
      justify-content: stretch;
    }

    &__button {
      flex: 1 1 calc(50% - 4px);
      justify-content: center;
      min-width: 0;
    }

    &__button--solid {
      flex: 1 1 100%;
      order: -1;
    }

    &__button--solid span {
      width: 100%;
    }
  }
}
